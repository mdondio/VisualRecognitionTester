<!DOCTYPE html>
<html>
<head></head>

<!-- LIBRERIE GENERICHE PER JQUERY -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script> 

<!-- FUNZIONI CREATE DA NOI -->
<script src="js/genericFunctions.js"></script>
<script src="js/functions.js"></script>

<!-- LIBRERIA PER DISEGNARE GRAFICI -->
<script src ="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- LIBRERIA PER PERSONALIZZAZIONE DEGLI ALERT -->
<script src="js/sweetalert2_mine.js"></script>
<link rel="stylesheet" href="css/sweetalert2_mine.css">

<!-- LIBRERIA PER CARICARE I FILE -->
<script src="js/dropzone.js"></script>
<link rel="stylesheet" href="css/dropzone.css">

<script>createHead();</script>

<body>

<header></header><script>createHeader();</script>

<div class="content">

	<input type=image id="backicon" class="inline" src="ico/backDARK.png" style="width:60px;height:auto;">

	<h3> Upload </h3>	
	
	<div class="row clearfix">
		<button id="submit-every-dropzone">Submit all files</button>
	</div>
	
	<div class="row clearfix">

			<div class="column fourth">
				<p class="title right"><br>positive<br>images</p>
				<p class="paragraph right">Upload positive images</p>	
			</div>
			<div class="column three-fourths">
			<br>
				<form action="/file-upload" class="dropzone" id="pos-element"></form>
			</div>
	</div>
	
	<div class="row clearfix">

			<div class="column fourth">
				<p class="title right"><br>negative<br>images</p>
				<p class="paragraph right">Upload negative images</p>	
			</div>
			<div class="column three-fourths">
			<br>
				<form action="/file-upload" class="dropzone" id="neg-element"></form>
			</div>
	</div>

</div>

</body>

<style>

.dropzone {  
 width: 900px; 
 border: dashed 2px forestgreen; 
 background-color: white; 
}  

</style>

<!-- ***TEST  -->
<style>
/* .dz-max-files-reached {background-color: red}; */
/* .dz-filename {width: 100%}; */
/* .dz-details {height: 100%; width: 100%}; */
</style>
<!-- ***TEST  -->

<script>

Dropzone.autoDiscover = false;

var myDropzoneTheFirst = new Dropzone(
        '#pos-element',
        {
            //url : "upload",
            maxFiles: 20,
            autoProcessQueue: false,
            init: function() {
      			this.on("addedfile", function(file) {

		        // Create the remove button
		        var removeButton = Dropzone.createElement("<img class='center' src='ico/garbageDARK.png' style='width:30px; height:auto;'>");
		
		        // Capture the Dropzone instance as closure.
		        var _this = this;

		        // Listen to the click event
		        removeButton.addEventListener("click", function(e) {
			          // Make sure the button click doesn't submit the form:
			          e.preventDefault();
			          e.stopPropagation();
		
			          // Remove the file preview.
			          _this.removeFile(file);
			          // If you want to the delete the file on the server as well,
			          // you can do the AJAX request here.
		        });

		        // Add the button to the file preview element.
		        file.previewElement.appendChild(removeButton);
      			
      			});


// 		      this.on("sending", function(file) {
// 		    	file.myCustomName = "testName_" + file.name;
// 		    	console.log(file.myCustomName);
// 			});

   		
   		 }//Closing init function
        
     }//Closing element
        
);//Closing dropzone item

var myDropzoneTheSecond = new Dropzone(
        '#neg-element',
        {
            //url : "upload1",
            maxFiles: 20,
            autoProcessQueue: false,
            init: function() {
      			this.on("addedfile", function(file) {

		        // Create the remove button
		        var removeButton = Dropzone.createElement("<img class='center' src='ico/garbageDARK.png' style='width:30px; height:auto;'>");
		
		        // Capture the Dropzone instance as closure.
		        var _this = this;

		        // Listen to the click event
		        removeButton.addEventListener("click", function(e) {
			          // Make sure the button click doesn't submit the form:
			          e.preventDefault();
			          e.stopPropagation();
		
			          // Remove the file preview.
			          _this.removeFile(file);
			          // If you want to the delete the file on the server as well,
			          // you can do the AJAX request here.
		        });

		        // Add the button to the file preview element.
		        file.previewElement.appendChild(removeButton);
      			
      			});


// 		      this.on("sending", function(file) {
// 		    	file.myCustomName = "testName_" + file.name;
// 		    	console.log(file.myCustomName);
// 			});

   		
   		 }//Closing init function
        
     }//Closing element
);//Closing dropzone item

$('#submit-every-dropzone').click(function(){           
  myDropzoneTheFirst.processQueue();
  myDropzoneTheSecond.processQueue();
});

  $('#backicon').mouseover(function(){
	$(this).attr('src','ico/back.png');
	});

	$('#backicon').mouseleave(function(){
		$(this).attr('src',"ico/backDARK.png" );
	});

	$('#backicon').click(function(){
		window.history.back();
	});

</script>

<style>
#submit-every-dropzone{
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    }
</style>

</html>