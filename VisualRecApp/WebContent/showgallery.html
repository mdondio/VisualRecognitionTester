<!DOCTYPE html>
<html>
<head></head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="js/genericFunctions.js"></script>
<script src="js/functions.js"></script>

<script>createHead();</script>

<body>
  <header id="header" style="animation-duration:2s"></header>
  <script>createHeader();</script>


	<div class="content">
	
		<input type=image id="backicon" class="inline" src="ico/backDARK.png" style="width:60px;height:auto;">

		<br>

			<div class="column third">&ensp;</div>
			<div class="column third">
				<h3 id="testsetTitle"></h3>
			</div>
			<div class="column third">&ensp;</div>


		<br> <br> <br> <br>

		<div class="column half">
			<p class='title center'>positive images</p>
			<p class='paragraph center'>list of all the pictures containing
				an object representing the category</p>
			<hr class="lineseparator">
<!-- 			<img src='ico/spin.svg' class="waiting2"> -->
			<div id="positivetestSetGallery" style=""></div>
		</div>

		<div class="column half">
			<p class='title center'>negative images</p>
			<p class='paragraph center'>list of all the pictures not
				containing any object representing the category, but similar ones</p>
			<hr class="lineseparator">
<!-- 			<img src='ico/spin.svg' class="waiting2"> -->
			<div id="negativetestSetGallery" style=""></div>
		</div>


	</div>


</body>

<script>

	//**************************************************************************
	//********* GET FROM THE SERVER TESTSET ***************************
	//**************************************************************************

// 	var loading_status = false;
	
// 	$('#negativetestSetGallery').display("none");
// 	$('#positivetestSetGallery').display("none");

	$.ajax({
		contentType : "application/json",
		dataType : "json",
		url : 'GetDataset',
		async : false,
		success : function(result) {
			var idgallery = localStorage.getItem("idgallery");
			for ( var i in result) {
				if (result[i]._id == idgallery) {
// 					var testname = idgallery.replace("_", " ");
					$("#testsetTitle").append(document.createTextNode(idgallery)); /*sostituire idgallery con testname se si vuole parsare il titolo*/
					
					var negative_images = [];
					for(var j=0;j<result[i].images.negative.length;j++) negative_images.push("GetImage?image_id="+result[i].images.negative[j]);

					var positive_images = [];
					for(var j=0;j<result[i].images.positive.length;j++) positive_images.push("GetImage?image_id="+result[i].images.positive[j]);
					
					createGallery('negativetestSetGallery',negative_images, result[i]._id + "NEG");
					createGallery('positivetestSetGallery',positive_images, result[i]._id + "POS");
					
				}
			}		
		
		}

	});
	
	
// 	loading_status = true;
	
// 	if(loading_status){
// 		$('.waiting2').fadeOut("slow");
// 		$('#negativetestSetGallery').fadeIn("slow");
// 		$('#positivetestSetGallery').fadeIn("slow");
// 	}
	
	//ADD button actions
	$('#backicon').mouseover(function(){
	$(this).attr('src','ico/back.png');
	});
	
	$('#backicon').mouseleave(function(){
		$(this).attr('src',"ico/backDARK.png" );
	});
	
	$('#backicon').click(function(){
		window.history.back();
	});
	
</script>

</html>