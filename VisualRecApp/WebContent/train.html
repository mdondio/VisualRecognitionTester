<!DOCTYPE html>
<html>
<head></head>

<!-- LIBRERIE GENERICHE PER JQUERY -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script> 

<!-- FUNZIONI CREATE DA NOI -->
<script src="js/genericFunctions.js"></script>
<script src="js/functions.js"></script>

<!-- LIBRERIA PER DISEGNARE GRAFICI -->
<script src ="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- LIBRERIA PER PERSONALIZZAZIONE DEGLI ALERT -->
<script src="js/sweetalert2_mine.js"></script>
<link rel="stylesheet" href="css/sweetalert2_mine.css">

<!-- LIBRERIA PER CARICARE I FILE -->
<script src="js/dropzone.js"></script>
<link rel="stylesheet" href="css/dropzone.css">

<script>createHead();</script>

<body>
<header></header><script>createHeader();</script>

	<div class="content">

		<br>

		<form id="myForm" action="javascript:startTrain();">
			<div class="column third">
				<select required class="title" id="trainingdataset">
					<option selected disabled value="">Select training dataset</option>
				</select>
			</div>
			<div class="column third">
				<p class="title center" id="labelselected">dataset label</p>
			</div>
			<div class="column third">
				<button type="submit" class="import">Start training</button>
			</div>
		</form>

		<br> <br>
<br> <br>

		<div class="column half">
			<p class='title center'>positive images</p>
			<p class='paragraph center'>list of all the pictures containing
				an object representing the category</p>
			<hr class="lineseparator">
			<div id=positiveTrainingGallery></div>
		</div>

		<div class="column half">
			<p class='title center'>negative images</p>
			<p class='paragraph center'>list of all the pictures not
				containing any object representing the category, but similar ones</p>
			<hr class="lineseparator">
			<div id=negativeTrainingGallery></div>
		</div>


	</div>

</body>

<script>

buildSelectDataSet("all",'#trainingdataset')

	$('#trainingdataset').on(
			'change',
			function() {
				var testsetID = $(this).val();
				
				$.ajax({
					contentType : "application/json",
					dataType : "json",
					url : 'GetDataset',
					data : 'sub_type=test_set',
					async : false,
					success : function(result) {
						$("#negativeTrainingGallery").empty();
						$("#positiveTrainingGallery").empty();
						for ( var i in result) {
							if (result[i]._id == testsetID) {
								createGallery('negativeTrainingGallery',
										result[i].images.negative,
										result[i]._id + "NEG");
								createGallery('positiveTrainingGallery',
										result[i].images.positive,
										result[i]._id + "POS");
								$("#labelselected").html(result[i].label)
								$("#labelselected").val(result[i]._id)
							}
						}

					}
				});

				$.ajax({
					contentType : "application/json",
					dataType : "json",
					url : 'GetDataset',
					data : 'sub_type=training_set',
					async : false,
					success : function(result) {
// 						$("#negativeTrainingGallery").empty();
// 						$("#positiveTrainingGallery").empty();
						for ( var i in result) {
							if (result[i]._id == testsetID) {
								createGallery('negativeTrainingGallery',
										result[i].images.negative,
										result[i]._id + "NEG");
								createGallery('positiveTrainingGallery',
										result[i].images.positive,
										result[i]._id + "POS");
								$("#labelselected").html(result[i].label)
								$("#labelselected").val(result[i]._id)
							}
						}

					}
				});
				
			});
</script>

</html>